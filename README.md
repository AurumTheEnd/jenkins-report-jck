# jenkins-report-jck
Jenkins plugin to show unit-test, tesng, jtreg and JCK reports summaries, diffs and details

The plugin reads archived gzipped xml files prdoduced by junit/testng/jtreg/jck suites  ([or anyhow else generated](https://github.com/judovana/OpenJdkBuilder/blob/master/tck/autoruns/jtreg-shell-xml.sh)) runs.

* [Implementation details](#implementation-details)
* [Job run details](#job-run-details)
    * [run page](#run-page)
    * [details page](#details-page)
* [Project details](#project-details)
* [View](#view-summary)
* [Blacklist and Whitelist](#blacklist-and-whitelist)
* [Project Settings](#project-settings)
* [View Settings](#view-settings)
* [Limitations](#limitations)
* [Diff cli tool](#diff-cli-tool)
* [Future work](#future-work)

## Implementation details
The xml reports you recieve, should be post processed a bit, and compressed.  Compressed, as plugin is used with reports hundrets of megabytes large. And postprocessed as various engines generates various reports. Thus the xml files should be gathered into archives, which are later considered as suites:
![suites](https://user-images.githubusercontent.com/2904395/43016538-6c5141aa-8c53-11e8-8b6f-2eb45ebcaf01.png)
The level of granularity is up to you. The tar.gz archvies are later cached as two relatively small json files - one with listing for diff, one with stack traces of failures.  Latest cache is the properties file with total/run/passed/failed/error/skipp keys to be reused via https://github.com/judovana/jenkins-report-generic-chart-column (and used for quicker renderig of graphs of this plugin itself)
## Job run details
### run page
On a build page, simple ```JTREG Reports Total: X, Error: Y, Failed: Z``` message is printed, where **JTREG Reports** is link to  dretails page:
### details page
![details page](https://user-images.githubusercontent.com/2904395/43016541-6cb4cc5c-8c53-11e8-944b-cf1d274c492e.png)
Here yo can see several items:
* **table**, with suites. Each suite have detailed  total/passed/failed/error skip details.  Table is followed by
* **listing of faiures**. The listing is clear, and contains failed tests only. Each failure contains expandable
    * **trace**. The listing is followd by
* **diff**. Diff is done first for added/removed suites. For unchanged suites, the diff of suite itself is done. You can immediately see exact **fixed** and **freshly failing** tests. After the diff, you can see 
* **full listing** of testsuite. The ful listing is stripped to 1000 lines due to performance. The output is generated by the rutines of [Diff cli tool](#diff-cli-tool), so please apologise a bit of cryptic "passed or missing" and "faile dor error" output. To see the full listing, you must use the [cli](#diff-cli-tool).
## Project details
![project details page](https://user-images.githubusercontent.com/2904395/43016540-6c95e4a4-8c53-11e8-8e59-db5b6b729b6b.png)
On the project page, you can see several graphs: 
* **number of failures**  shows how much test failed and how much had error. The graph is scalled, but in usual world, there is very small number of failures, and similarly small number of errors, so scale is not affected.
* **number of total tests**  shows how much test exists in suite and how much wasrun. The graph is scalled, but in usual world, there is very small number of skipped tests so both lines are of same value and so scale again should not be affected.
* **regression chart**  shows how much test had changed status. Green bar - number of tests which get fixed. Red bar, number of tests which started to fail. This graph is here to prevent overlook of X fixed tests and (same) X of freshly failing tests. IN such case, your total number of passes/failures is constant, and thus invisible on normla charts.

Each chart have detailed tooltip  and is capable of click which takes you directly to [details page](#details-page):
![tooltip](https://user-images.githubusercontent.com/2904395/43016542-6cd42700-8c53-11e8-9406-e0b3a908c60a.png)
## View summary
## Blacklist and Whitelist
## Project Settings
## View Settings
## Limitations
## Diff cli tool
## Future work
